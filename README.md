# –ú–æ–¥—É–ª—å "worker_pool" #
## –ê–≤—Ç–æ—Ä: –¢—Ä–æ—Ñ–∏–º–æ–≤ –í–ª–∞–¥–∏–º–∏—Ä ##
---
### –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ ###
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
- [–û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è](#–æ–ø–∏—Å–∞–Ω–∏–µ-–º–æ–¥—É–ª—è)
- [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞)
- [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å –±–∞–∑–æ–≤—ã–º workerPool](#–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è-–ø–æ-—Ä–∞–±–æ—Ç–µ-—Å-–±–∞–∑–æ–≤—ã–º-workerPool)
- [–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–≤—ã–º workerPool](#–ø—Ä–∏–º–µ—Ä-—Ä–∞–±–æ—Ç—ã-—Å-–±–∞–∑–æ–≤—ã–º-workerPool)
- [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å outStreamWorkerPool (proxy-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º –¥–ª—è workerPool)](#–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è-–ø–æ-—Ä–∞–±–æ—Ç–µ-—Å-outStreamWorkerPool-proxy-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º-–¥–ª—è-workerPool)
- [–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å outStreamWorkerPool (proxy-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º –¥–ª—è workerPool)](#–ø—Ä–∏–º–µ—Ä-—Ä–∞–±–æ—Ç—ã-—Å-outStreamWorkerPool-proxy-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º-–¥–ª—è-workerPool)
---
### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ###
```
go get github.com/Vladimir220/worker_pool@v0.0.6
```
### –í–≤–µ–¥–µ–Ω–∏–µ ###
–ú–æ–¥—É–ª—å worker_pool –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è worker-–∞–º–∏ (–º–∏–Ω—å–æ–Ω–∞–º–∏üôÇ) —Å —Ü–µ–ª—å—é –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º—É.

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å "Open/Closed Principle" (SOLID). 
–î–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, —Ñ–∞–±—Ä–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã, –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è "–ü–æ—Å—Ä–µ–¥–Ω–∏–∫" ("Proxy"). –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º –≤ —Ä–∞–∑–¥–µ–ª–µ "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞".
### –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è ###
#### –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–æ–¥—É–ª—è: ####
![1](https://github.com/Vladimir220/worker_pool/blob/main/pics/class_diagram.jpg)

–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –æ–ø–∏—à—É –≤—Å—ë –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–∫–ª–∞—Å—Å—ã):
- IWorker: **—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–π** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —Å–µ–º–µ–π—Å—Ç–≤–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã—Ö worker-–æ–≤
- simpleWorker: **–Ω–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º–∞—è** —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è <ins>–ø—Ä–∏–º–µ—Ä</ins> —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ IWorker; —ç—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –≤—Ö–æ–¥–Ω–æ–π –∫–∞–Ω–∞–ª –∏ –Ω–∞ –≤—ã—Ö–æ–¥–Ω–æ–π –∫–∞–Ω–∞–ª –ø–æ–¥–∞—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç–∏–ø–∞ `"Message from Worker [id:%d]: \"%s\""`, –≥–¥–µ s --- –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- IWorkerPool: **—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–π** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —Å–µ–º–µ–π—Å—Ç–≤–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã—Ö worker pool-–æ–≤
- workerPool: **–Ω–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º–∞—è** —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è –±–∞–∑–æ–≤—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ IWorkerPool (—Ö–æ—Ç—è –æ—Å—Ç–∞—ë—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥—Ä—É–≥—É—é –±–∞–∑–æ–≤—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é); —ç—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞–±–æ—Ç–æ–π –æ–±—ä–µ–∫—Ç–æ–≤ —Ç–∏–ø–æ–≤, —Ä–µ–∞–ª–µ–∑—É—é—â–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å IWorker
- outStreamWorkerPool: **–Ω–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º–∞—è** —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è <ins>–ø—Ä–∏–º–µ—Ä</ins> —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –±–∞–∑–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ worker pool (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ workerPool) —á–µ—Ä–µ–∑ –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è "–ü–æ—Å—Ä–µ–¥–Ω–∏–∫" ("Proxy"); —ç—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞–±–æ—Ç–æ–π –æ–±—ä–µ–∫—Ç–æ–≤ —Ç–∏–ø–æ–≤, —Ä–µ–∞–ª–µ–∑—É—é—â–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å IWorker, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç –≤—ã—Ö–æ–¥–Ω–æ–π –∫–∞–Ω–∞–ª –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—Ç—É–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –≤—ã—Ö–æ–¥–Ω–æ–π –ø–æ—Ç–æ–∫ io.Writer

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –Ω–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ–∞–±—Ä–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
- SimpleWorkerCreator() --- –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è simpleWorker (–ø—Ä–∏–º–µ—Ä —Ñ–∞–±—Ä–∏–∫–∏ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
- WorkerPoolCraetor() --- –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è workerPool
- OutStreamWorkerPoolCraetor() --- –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è OutStreamWorkerPoolCraetor (–ø—Ä–∏–º–µ—Ä —Ñ–∞–±—Ä–∏–∫–∏ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã)

–û–±—Ä–∞—â–∞—é –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ workerPool –∏–º–µ–µ—Ç –ø–æ–ª–µ workerCreator, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ñ—É–Ω–∫—Ü–∏—é-—Ñ–∞–±—Ä–∏–∫—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è worker-–æ–≤; —ç—Ç–æ –ø–æ–ª–µ –¥–æ–ª–∂–Ω–æ –∏–º–µ—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–∏–ø —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∏–¥–∞:

`type WorkerCreatorFunc func(int, chan struct{}, *sync.WaitGroup, <-chan string, chan<- string) IWorker`

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ ###
–ü—Ä–æ–¥—É–º–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞:
- –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ worker-–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Ä–µ–∞–ª–∏–∑—É—é—â—É—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å IWorker, –∏ —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥, —Å–æ–∑–¥–∞—é—â–∏–π –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π —ç—Ç—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É.
- –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑–æ–≤–æ–≥–æ worker pool (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é workerPool) —Å–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Ä–µ–∞–ª–∏–∑—É—é—â—É—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å IWorkerPool, –∏ —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥, —Å–æ–∑–¥–∞—é—â–∏–π –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π —ç—Ç—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É.
- –î–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –±–∞–∑–æ–≤–æ–≥–æ worker pool (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é workerPool) –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –Ω–µ–≥–æ proxy-–æ–±—ë—Ä—Ç–∫—É, –∫–æ—Ç–æ—Ä–∞—è —Ç–∞–∫–∂–µ –Ω–∞–¥–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ IWorkerPool. –î–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–∫–∂–µ –Ω–∞–¥–æ —Å–¥–µ–ª–∞—Ç—å —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥, —Å–æ–∑–¥–∞—é—â–∏–π –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π —ç—Ç—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É.
### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å –±–∞–∑–æ–≤—ã–º workerPool ###
–°–æ–∑–¥–∞–π—Ç–µ workerPool —á–µ—Ä–µ–∑ —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥: 

`WorkerPoolCraetor(wg *sync.WaitGroup, inputCh <-chan string, outputCh chan<- string, workerCreator WorkerCreatorFunc) workerPool`

–°—Ä–∞–∑—É —Ä–µ—à–∏—Ç–µ, –∫–∞–∫ –±—É–¥–µ—Ç–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å workerPool: —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∏–ª–∏ —Å –ø–æ–º–æ—â—å—é defer. –í–∞–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å workerPool, –∏–Ω–∞—á–µ worker-—ã –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç—É –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞.

–ï—Å–ª–∏ –≤—ã –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ workerPool –≤ –¥—Ä—É–≥–æ–π –≥–æ—Ä—É—Ç–∏–Ω–µ, —Ç–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–¥–µ –º–æ–∂–µ—Ç–µ –¥–æ–∂–¥–∞—Ç—å—Å—è –æ–∫–æ–Ω—á–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å –ø–æ–º–æ—â—å—é: `wg.Wait()`, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Ä–∞–Ω–µ–µ –ø–µ—Ä–µ–¥–∞–Ω –≤ workerPool.

–§—É–Ω–∫—Ü–∏–∏ workerPool:
- AddAndStartWorkers(count int) --- –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ count worker-–æ–≤ –∏ –∏—Ö –∑–∞–ø—É—Å–∫ –≤ –≥–æ—Ä—É—Ç–∏–Ω–∞—Ö
- DropWorkers(count int): error --- —É–¥–∞–ª–µ–Ω–∏–µ count worker-–æ–≤, –ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ worker-–æ–≤ –æ–ø–∏—Å–∞–Ω–∞ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ IWorker (–¥–ª—è simpleWorker –∏—Ö —Ä–∞–±–æ—Ç–∞ –±—É–¥–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ª–∏–±–æ –∫–æ–≥–¥–∞ –æ–Ω–∏ –≤ —Ä–µ–∂–∏–º–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –ª–∏–±–æ –∫–æ–≥–¥–∞ –æ–Ω–∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏ —Å–≤–æ—é —Ä–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏)
- Stop() --- –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö worker-–æ–≤, –ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ worker-–æ–≤ –∫–∞–∫ –∏ —É DropWorkers
- GetNumOfWorkers() int --- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö worker-–æ–≤
### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–≤—ã–º workerPool ###
```
package main

import (
	"fmt"
	"sync"

	wpImp "github.com/Vladimir220/worker_pool"
)

func main() {
	inputCh := make(chan string)
	outputCh := make(chan string)
	wg := &sync.WaitGroup{}
	wp := wpImp.WorkerPoolCraetor(wg, inputCh, outputCh, wpImp.SimpleWorkerCreator)

	defer wp.Stop()

	stopSignal := make(chan struct{})

	defer func() {
		close(stopSignal)
		wp.Stop()
		close(inputCh)
		close(outputCh)
	}()

	go func() {
		for {
			select {
			case d := <-outputCh:
				{
					select {
					case <-stopSignal:
						return
					default:
					}

					fmt.Println(d)
				}
			case <-stopSignal:
				return
			}
		}
	}()

	fmt.Println("–î–æ–±–∞–≤–ª—è–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º 3 –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è")
	wp.AddWorkersAndStart(3)
	for i := 0; i < 10; i++ {
		inputCh <- fmt.Sprintf("%d", i)
	}
	fmt.Println("–î–æ–±–∞–≤–ª—è–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –µ—â—ë 2 –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è")
	wp.AddWorkersAndStart(2)
	for i := 0; i < 10; i++ {
		inputCh <- fmt.Sprintf("%d", i)
	}
	fmt.Println("–£–¥–∞–ª—è–µ–º 4 –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è")
	wp.DropWorkers(4)

	for i := 0; i < 10; i++ {
		inputCh <- fmt.Sprintf("%d", i)
	}
}
```
#### –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ####
![2](https://github.com/Vladimir220/worker_pool/blob/main/pics/Exmp_res.JPG)

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å outStreamWorkerPool (proxy-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º –¥–ª—è workerPool) ###
–î–ª—è —Ä–∞–±–æ—Ç—ã —Å outStreamWorkerPool —Å–æ–∑–¥–∞–π—Ç–µ outStreamWorkerPool —á–µ—Ä–µ–∑ —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥: 

`OutStreamWorkerPoolCraetor(wg *sync.WaitGroup, inputCh <-chan string, workerCreator WorkerCreatorFunc, writer io.Writer) *outStreamWorkerPool`

OutStreamWorkerPool –∏–º–µ–µ—Ç —Ç–∞–∫–∏–µ –∂–µ –º–µ—Ç–æ–¥—ã, —á—Ç–æ –∏ workerPool, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ –æ–±—â–µ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É IWorkerPool. –û–¥–Ω–∞–∫–æ OutStreamWorkerPool –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç workerPool —Å–ø–æ—Å–æ–±–æ–º –≤—ã–≤–æ–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞–±–æ—Ç—ã: –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –ø–æ—Ç–æ–∫ io.Writer, —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≤ —Ñ–∞–±—Ä–∏—á–Ω–æ–º –º–µ—Ç–æ–¥–µ OutStreamWorkerPoolCraetor.

–¢–∞–∫ –∂–µ –∫–∞–∫ –∏ —Å workerPool, –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ OutStreamWorkerPool –≤ –∫–æ–Ω—Ü–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã.

### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å outStreamWorkerPool (proxy-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º –¥–ª—è workerPool) ###
```
package main

import (
	"fmt"
	"os"
	"sync"

	wpImp "github.com/Vladimir220/worker_pool"
)

func main() {
	inputCh := make(chan string)
	wg := &sync.WaitGroup{}

	oswp := wpImp.OutStreamWorkerPoolCraetor(wg, inputCh, wpImp.SimpleWorkerCreator, os.Stdout)
	defer oswp.Stop()

	fmt.Println("–¢–µ—Å—Ç OutStreamWorkerPoolCraetor")
	fmt.Println("–î–æ–±–∞–≤–ª—è–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º 3 –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è")
	oswp.AddWorkersAndStart(3)
	for i := 0; i < 10; i++ {
		inputCh <- fmt.Sprintf("%d", i)
	}
	fmt.Println("–î–æ–±–∞–≤–ª—è–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –µ—â—ë 2 –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è")
	oswp.AddWorkersAndStart(2)
	for i := 0; i < 10; i++ {
		inputCh <- fmt.Sprintf("%d", i)
	}
	fmt.Println("–£–¥–∞–ª—è–µ–º 4 –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è")
	oswp.DropWorkers(4)

	for i := 0; i < 10; i++ {
		inputCh <- fmt.Sprintf("%d", i)
	}
}
```

–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã –±—É–¥–µ—Ç —Ç–∞–∫–æ–π –∂–µ, –∫–∞–∫ –∏ –≤ –ø—Ä–∏–º–µ—Ä–µ —Ä–∞–±–æ—Ç—ã —Å workerPool. –û–¥–Ω–∞–∫–æ —Ç–µ–ø–µ—Ä—å –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–µ –Ω—É–∂–Ω–æ —Å—á–∏—Ç—ã–≤–∞—Ç—å –≤—ã—Ö–æ–¥–Ω–æ–π –∫–∞–Ω–∞–ª, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω –≤ –ø–æ—Ç–æ–∫ io.Writer, —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ OutStreamWorkerPoolCraetor (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ --- os.Stdout).
